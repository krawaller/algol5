import prettier from "prettier";
import { punctuate } from "../../../common";
import { FullDefAnon } from "../../../types";

export const makeGameMainPage = (def: FullDefAnon) => {
  const gameId = def.meta.id;
  const content = `
// Generated by the makeGamePages command

import React from "react";

import payload from "../../../../payloads/dist/games/${gameId}";
import { GamePage } from "../../../../ui/src/components/GamePage";
import { AlgolPage } from "../../../../ui/src/helpers/algolPage";

export const Game: AlgolPage = props => {
  const { ctxt, actions } = props;
  return (
    <GamePage gamePayload={payload} actions={actions} ctxt={ctxt} />
  );
};

Game.domain = "${gameId}";
Game.mainImage = "/images/games/${gameId}/${gameId}_${
    def.variants[0].code
  }_active.png"
Game.metaDesc = "Play the abstract board game ${
    def.meta.name
  } at Chessicals! ${punctuate(def.meta.tagline)}"
Game.metaTitle = "Play ${def.meta.name} online"
Game.title = "${def.meta.name}"
Game.preloadImages = payload.imgsToPreload

export default Game;
`;
  return prettier.format(content, { filepath: "foo.ts" });
};
